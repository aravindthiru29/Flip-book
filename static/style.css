body {
    background: #f4f4f4;
    font-family: Arial, sans-serif;
    text-align: center;
}

.book {
    position: relative;
    width: 800px;
    height: 560px;
    margin: 40px auto;
    perspective: 2200px;
    touch-action: none;
}

/* shared page */
.sheet {
    position: absolute;
    width: 400px;
    height: 100%;
    background: white;
    transform-style: preserve-3d;
    transition: transform 0.5s ease;
}

/* RIGHT PAGE → NEXT */
.right-sheet {
    left: 400px;
    transform-origin: left center;
}

/* LEFT PAGE → PREVIOUS */
.left-sheet {
    left: 0;
    transform-origin: right center;
}

/* faces */
.sheet .front,
.sheet .back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    background: white;
}

.sheet .back {
    transform: rotateY(180deg);
}

/* spine */
.spine {
    position: absolute;
    left: 398px;
    width: 4px;
    height: 100%;
    background: #bbb;
}

canvas {
    width: 100%;
    height: 100%;
    display: block;
}

/* dragging disables animation */
.sheet.dragging {
    transition: none !important;
}
.sheet.next {
    transform: rotateY(-180deg);
}

/* ---------- EDGE CURL ILLUSION ---------- */

/* front face curl */
.sheet .front::after {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    width: 40px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.2s ease;
}

/* right page curling left (NEXT) */
.right-sheet .front::after {
    right: 0;
    background: linear-gradient(
        to left,
        rgba(0,0,0,0.35),
        rgba(0,0,0,0.15),
        rgba(0,0,0,0)
    );
}

/* left page curling right (PREVIOUS) */
.left-sheet .front::after {
    left: 0;
    background: linear-gradient(
        to right,
        rgba(0,0,0,0.35),
        rgba(0,0,0,0.15),
        rgba(0,0,0,0)
    );
}

/* show curl during drag */
.sheet.dragging .front::after {
    opacity: 1;
}

/* ---------- DYNAMIC PAGE SHADOW ---------- */

.sheet::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease;
}

.right-sheet::before {
    background: radial-gradient(
        circle at left center,
        rgba(0,0,0,0.35),
        rgba(0,0,0,0.15),
        rgba(0,0,0,0)
    );
}

.left-sheet::before {
    background: radial-gradient(
        circle at right center,
        rgba(0,0,0,0.35),
        rgba(0,0,0,0.15),
        rgba(0,0,0,0)
    );
}

.sheet.dragging::before {
    opacity: 1;
}
.sheet::before {
    opacity: calc(var(--shadow, 0) * 1);
}
